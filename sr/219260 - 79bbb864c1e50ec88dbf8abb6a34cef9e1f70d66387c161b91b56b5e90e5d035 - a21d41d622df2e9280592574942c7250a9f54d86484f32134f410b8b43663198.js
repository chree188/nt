"use strict";var CertService=function(){LocalContractStorage.defineMapProperty(this,"_wallet_addr_valid");LocalContractStorage.defineProperty(this,"_wallet_addr_size",null);LocalContractStorage.defineMapProperty(this,"_taxno_valid");LocalContractStorage.defineProperty(this,"_taxno_size",null);LocalContractStorage.defineMapProperty(this,"_company_info");LocalContractStorage.defineProperty(this,"_company_info_size",null);LocalContractStorage.defineMapProperty(this,"_taxno_info");LocalContractStorage.defineProperty(this,"_taxno_info_size",null);LocalContractStorage.defineMapProperty(this,"_wallet_info");LocalContractStorage.defineProperty(this,"_wallet_info_size",null);LocalContractStorage.defineMapProperty(this,"_wallet_arr");LocalContractStorage.defineProperty(this,"_wallet_arr_size",null);LocalContractStorage.defineMapProperty(this,"_taxno_wallet_info");LocalContractStorage.defineProperty(this,"_taxno_wallet_info_size",null)};CertService.prototype={init:function(){},_isValidWallet:function(a){var c=Blockchain.verifyAddress(a);var b=this._wallet_addr_valid.get(a);return c&&b},getAddrInfo:function(b){if(0==this._isValidWallet(b)){return{"status":"-1","msg":"wallet address is not valid"}}var d=this._wallet_info.get(b);if(d){if(d["type"]=="company"){var c=this._company_info.get(d["index"]);return{"status":"0","msg":"success","ret":c}}else{if(d["type"]=="person"){return{"status":"-1","msg":"not support person now!"}}else{var a="not a valid wallet type"+String(d["type"]);return{"status":"-1","msg":regmsg}}}}else{return{"status":"-1","msg":"wallet not exist"}}},getCompanyInfoByTaxno:function(a){var b=this._taxno_info.get(a);return this._company_info.get(b)},getAddrInfo_pro:function(a){},VerifyAddrInfo:function(a,b,c){},setCompanyAddrInfo:function(a,e){this._wallet_addr_valid.set(a,1);this._wallet_addr_valid_size=this.wallet_addr_valid_size+1;console.log(e);this._taxno_valid.set(e["taxno"],1);this._taxno_valid_size=this._taxno_valid_size+1;var f=this._taxno_info.get(e["taxno"]);console.log(f);if(f){this._company_info.set(f,e);var d=this._taxno_wallet_info.get(e["taxno"]);var b=this._wallet_arr.get(d);b.push(a);this._wallet_arr.set(b);this.wallet_info.set(a,{"type":"company","index":f});return{"status":"0","msg":"set company_info_ok"}}else{this._company_info.set(this._company_info_size+1,e);this._company_info_size=this._company_info_size+1;this._wallet_info.set(a,{"type":"company","index":this._company_info_size});this._wallet_arr.set(this._wallet_arr_size+1,[a]);this._wallet_arr_size=this._wallet_arr_size+1;var c=this._taxno_info.get(e["taxno"]);if(c){return{"status":"-1","msg":"taxno duplicate!"}}else{this._taxno_info.set(String(e["taxno"]),this._company_info_size);this._taxno_info_size=this._taxno_info_size+1}this._taxno_wallet_info.set(this._taxno_wallet_info_size+1,this._wallet_arr_size);return{"status":"0","msg":"set company_info_ok"}}},deleteAddrInfo:function(a){this._wallet_addr_valid.set(a,0);return{"status":"0","msg":"wallet delete ok"}},transferout:function(a){return Blockchain.transfer("n1M1azDcJK8vyZEfkhnpY58K5DMXWb89J62",a)},setPrivateCode:function(a){},_md5:function(a){return md5(String(a))},_sha1:function(a){return sha1(String(a))},sha256:function(a){return sha256(String(a))}};module.exports=CertService;