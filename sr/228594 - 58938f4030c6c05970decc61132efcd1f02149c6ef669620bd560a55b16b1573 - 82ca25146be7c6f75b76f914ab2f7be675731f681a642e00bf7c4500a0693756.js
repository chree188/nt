"use strict";var GuestBookItem=function(t){if(t){var e=JSON.parse(t);this.key=e.key,this.title=e.title,this.text=e.text,this.author=e.author,this.timestamp=e.timestamp}else this.key="",this.title="",this.text="",this.author="",this.timestamp=""};GuestBookItem.prototype={toString:function(){return JSON.stringify(this)}};var GuestBookDictionary=function(){LocalContractStorage.defineProperty(this,"size"),LocalContractStorage.defineMapProperty(this,"keysMap"),LocalContractStorage.defineMapProperty(this,"itemsMap",{parse:function(t){return new GuestBookItem(t)},stringify:function(t){return t.toString()}})};GuestBookDictionary.prototype={init:function(){this.size=0},save:function(t,e){if(t=t.trim(),e=e.trim(),""===t||""===e)throw new Error("empty title / text");if(t.length>64||e.length>256)throw new Error("title / text exceed limit length");var i=Blockchain.transaction.from,r=Blockchain.transaction.hash,s=Blockchain.transaction.timestamp,o=this.itemsMap.get(r);if(o)throw new Error("value has been occupied");o=new GuestBookItem,o.key=r,o.title=t,o.text=e,o.author=i,o.timestamp=s,this.itemsMap.put(r,o),this.keysMap.put(this.size,o.key),this.size+=1},get:function(t){if(t=t.trim(),""===t)throw new Error("empty key");return this.itemsMap.get(t)},len:function(){return this.size},page:function(t,e){t=parseInt(t),e=parseInt(e);var i=this.size-(e+t);if(i>this.size)throw new Error("args are not valid");i<0&&(i=0);var r=[],s=this.size-e-1;for(s<0&&(s=0),s;s>=i;s--){var o=this.keysMap.get(s),n=this.itemsMap.get(o);r.push(n)}return r}},module.exports=GuestBookDictionary;